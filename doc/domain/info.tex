\section{Information Models}

\idx{Information model}Structuring or modeling of information is ways that allows for flexible and efficient queries.

\subsection{Schemas}

\subsection{Models}

% text
The model\idx{Model} itself is what describes that concrete domain instance. Continuing in the spirit of the building domain, figure \ref{fig:topics:info:model} illustrates what a partial model of a building could look like. This particular model contaings two rooms on the 3rd floor of some building. Each room is annotated with an area as well as three sensors covering the modalities of temperateure, relative humidity and occupancy. A PIR sensor measures the occupancy, and a humidity sensor measures the relative humidity. In one room a thermistor is measuring the temperature and in the other a thermocouple does the same. Each sensor is associated with a unit as well as a pair of data references; one for retreaving historical data (using a timeseries ID) and one for retreaving live data (using a stream ID).

% fig: two match sites, context and information nodes, unit, stream-id
\begin{figure}[tbp]
  \begin{center}
  \rotatebox{90}{
    \begin{tikzpicture}[remember picture]
      \input{include/info_model.tex}
      
      \genRoomI{-\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
      \genRoomII{\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
      \genFloor
    \end{tikzpicture}
  }
  \end{center}
  \caption[Example of an abstract information model]{Example of an abstract information model covering two rooms on a single floor and some static and dynamic data associated with thiese. TM is an abbreviation for thermistor, and TC for thermocouple.}
  \label{fig:topics:info:model}
\end{figure}

\subsection{Query Patterns}

% problem: extracting information from a model, example application (want to list the absolute humidity of all room organized by floor), what we need (temp data, rel hum data, floor name)

% solution: query execution engine, traversing enitre model for sites where the pattern matches, what is matched? what is captured?

% fig: pattern covering [room, room area, occupancy provider, temperature provider, relhum provider]
\begin{figure}[tbp]
  \begin{center}
    \begin{tikzpicture}[remember picture]
      \newcommand{\nodetext}[1]{\scalebox{0.7}{#1}}
      \newcommand{\modalitytext}[1]{\scalebox{0.65}{#1}}
      \newcommand{\fieldtext}[1]{\scalebox{0.7}{#1}}
      \newcommand{\edgetext}[1]{\scalebox{0.7}{\textit{#1}}}
      
      \newcommand{\pointsize}[0]{(8mm)}
      \newcommand{\dist}[0]{(24mm)}
      
      \tikzstyle{dedge} = [->,>=stealth,draw=black]
      \tikzstyle{dbedge} = [<->,>=stealth,draw=black]
      \tikzstyle{node}=[
        overlay,
        circle,
        align=center,
        anchor=center,
      ]
      \tikzstyle{point}=[
        node,
        draw=blue,
        minimum height=\pointsize,
        minimum width=\pointsize,
      ]
      \tikzstyle{room}=[
        node,
        draw=blue,
        minimum height=\pointsize,
        minimum width=\pointsize,
      ]
      \tikzstyle{modality}=[
        node,
        draw=purple,
      ]
      \tikzstyle{unit}=[
        node,
        draw=teal,
        anchor=center,
      ]
      \tikzstyle{data}=[
        node,
        draw=teal,
        anchor=center,
      ]
      \tikzstyle{field}=[
        data,
        rectangle,
        anchor=center,
      ]
      
      \node[room] (room) at (0,0) {Room};
      \node[room] (floor) at ([xshift=30mm] room.center) {Floor};
      \node[data] (floorname) at ([xshift=22mm] floor.center) {?};
      \draw[dedge] (floor) -- (room) node[midway,sloped,above] {contains};
      \draw[dedge] (floor) -- (floorname) node[midway,sloped,above] {name};
      
      \node[modality] (tmodality) at ([xshift=-26mm, yshift=-26mm] room.center) {temperature};
      \node[modality] (hmodality) at ([xshift=-26mm, yshift= 26mm] room.center) {relative\\humidity};
      \node[room] (tsensor) at ([xshift=-32mm] tmodality.center) {?};
      \node[room] (hsensor) at ([xshift=-32mm] hmodality.center) {?};
      \draw[dedge] (room) -- (tmodality) node[midway,sloped,above] {modality};
      \draw[dedge] (room) -- (hmodality) node[midway,sloped,above] {modality};
      \draw[dedge] (tsensor) -- (tmodality) node[midway,sloped,above] {provides};
      \draw[dedge] (hsensor) -- (hmodality) node[midway,sloped,above] {provides};
    \end{tikzpicture}
  \end{center}
  \vspace{8mm}
  \caption[Example of the pattern of an abstract model query]{Example of the pattern of an abstract model query. It matches combinations of temperature and relative humidity sensors that are associated with a specific room, along with the floor name associated with the floor of that room.}
  \label{fig:topics:info:query:pattern}
\end{figure}

\subsection{Match Sites}

% text

% fig: scale vbox of [match site 1, match site 2, all unit matches, all data matches]
\begin{figure}[tbp]
  \centering
  \begin{subfigure}[b]{0.48\textwidth}
    \rotatebox{90}{
      \scalebox{0.5}{
        \begin{tikzpicture}[remember picture]
          \input{include/info_model.tex}
          
          \genRoomI{-\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genRoomII{\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genFloor
        \end{tikzpicture}
      }
    }
    \caption{1st match site of absolute humidity query.}
    \label{fig:topics:info:match:absI}
  \end{subfigure}
  \hfill
  \begin{subfigure}[b]{0.48\textwidth}
    \rotatebox{90}{
      \scalebox{0.5}{
        \begin{tikzpicture}[remember picture]
          \input{include/info_model.tex}
          
          \genRoomI{-\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genRoomII{\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genFloor
        \end{tikzpicture}
      }
    }
    \caption{2nd match site of absolute humidity query.}
    \label{fig:topics:info:match:absII}
  \end{subfigure}
  \\
  \begin{subfigure}[b]{0.48\textwidth}
    \rotatebox{90}{
      \scalebox{0.5}{
        \begin{tikzpicture}[remember picture]
          \input{include/info_model.tex}
          
          \genRoomI{-\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genRoomII{\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genFloor
        \end{tikzpicture}
      }
    }
    \caption{Match sites of unit query.}
    \label{fig:topics:info:match:unit}
  \end{subfigure}
  \hfill
  \begin{subfigure}[b]{0.48\textwidth}
    \rotatebox{90}{
      \scalebox{0.5}{
        \begin{tikzpicture}[remember picture]
          \input{include/info_model.tex}
          
          \genRoomI{-\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genRoomII{\centerspacing}{0}{highlight:point,highlight:data,highlight:unit}
          \genFloor
        \end{tikzpicture}
      }
    }
    \caption{Match sites of data query.}
    \label{fig:topics:info:match:data}
  \end{subfigure}
  
  \caption[Example of match sites in an abstract information model]{Example of match sites in an abstract information model.}
  \label{fig:topics:info:match}
\end{figure}

\subsection{Result Sets}

% text

% fig

\subsection{Result Sets}

\subsection{Model Reuse and Extension}

% note that the same model can be used for other applications, currently you could calculate the per-floor fractional occupancy, but the model could be extended

% list of examples of extensions: polygons for rooms and floors, physical location of sensors, actuators, electrical distribution trees, who rents/occupies the rooms (and their climate preferences)

\subsection{Building Abstractions}

% automatic stacking of virtual sensors

% automatic unit conversion

\subsection{Ontologies}
\subsubsection{RDF}
\subsubsection{OWL}
\subsubsection{Select Ontologies}

% brick
\idx{Brick}\url{https://brickschema.org}

% web of things

% schema.org

% QUDT
The QUDT\idx{QUDT}\footnote{\url{https://www.qudt.org}} ontology models units. While it is the de-facto ontology for this, it is not particularly convenient for automatic conversion.

\subsection{Property Graphs}
\subsubsection{Neo4J}

\idx{Neo4j}\url{https://neo4j.com}

\subsection{Query Languages}
\subsubsection{Cypher}
\subsubsection{OpenCypher}

\idx{OpenCypher}\url{https://opencypher.org}

\subsubsection{Gremlin}
\subsubsection{SparQL}


