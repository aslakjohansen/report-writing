


\section{Information Models}

\idx{Information model}Structuring or modeling of information is ways that allows for flexible and efficient queries.

\subsection{Schemas}

\subsection{Models}

% text
The model\idx{Model} itself is what describes that concrete domain instance. Continuing in the spirit of the building domain, figure \ref{fig:topics:info:model} illustrates what a partial model of a building could look like. This particular model contaings two rooms on the 3rd floor of some building. Each room is annotated with an area as well as three sensors covering the modalities of temperateure, relative humidity and occupancy. A PIR sensor measures the occupancy, and a humidity sensor measures the relative humidity. In one room a thermistor is measuring the temperature and in the other a thermocouple does the same. Each sensor is associated with a unit as well as a pair of data references; one for retreaving historical data (using a timeseries ID) and one for retreaving live data (using a stream ID).

% fig: two match sites, context and information nodes, unit, stream-id
\begin{figure}[tbp]
  \begin{center}
  \rotatebox{90}{
    \begin{tikzpicture}[remember picture]
      \newcommand{\nodetext}[1]{\scalebox{0.7}{#1}}
      \newcommand{\modalitytext}[1]{\scalebox{0.65}{#1}}
      \newcommand{\fieldtext}[1]{\scalebox{0.7}{#1}}
      \newcommand{\edgetext}[1]{\scalebox{0.7}{\textit{#1}}}
      \newcommand{\hledgetext}[1]{\edgetext{\textbf{#1}}}
      \newcommand{\centerspacing}[0]{2.0}
      \newcommand{\pointsize}[0]{(8mm)}
      \newcommand{\datadist}[0]{(11mm)}
      \newcommand{\pointdist}[0]{(\pointsize/2+9mm)}
      \newcommand{\roomdist}[0]{(49mm)}
      \newcommand{\sqrttwo}[0]{(1.41421356237)}
      \newcommand{\diagside}[0]{(0.70710678119)}
      
      \tikzstyle{dedge} = [->,>=stealth,draw=black]
      \tikzstyle{dbedge} = [<->,>=stealth,draw=black]
      \tikzstyle{node}=[
        overlay,
        circle,
        align=center,
        anchor=center,
      ]
      \tikzstyle{point}=[
        node,
        draw=blue,
        minimum height=\pointsize,
        minimum width=\pointsize,
      ]
      \tikzstyle{room}=[
        node,
        draw=blue,
        minimum height=\pointsize,
        minimum width=\pointsize,
      ]
      \tikzstyle{modality}=[
        node,
        draw=purple,
      ]
      \tikzstyle{unit}=[
        node,
        draw=teal,
        anchor=center,
      ]
      \tikzstyle{data}=[
        node,
        draw=teal,
        anchor=center,
      ]
      \tikzstyle{field}=[
        data,
        rectangle,
        anchor=center,
      ]
      \tikzstyle{highlight}=[
        very thick,
      ]
      \tikzstyle{highlighted-point}=[
        point,
        highlight,
        fill=blue!10,
      ]
      \tikzstyle{highlighted-room}=[
        room,
        highlight,
        fill=blue!10,
      ]
      \tikzstyle{highlighted-modality}=[
        modality,
        highlight,
        fill=purple!10,
      ]
      \tikzstyle{highlighted-unit}=[
        unit,
        highlight,
        fill=teal!10,
      ]
      \tikzstyle{highlighted-data}=[
        data,
        highlight,
        fill=teal!10,
      ]
      \tikzstyle{highlighted-field}=[
        field,
        highlight,
        fill=teal!10,
      ]
      
      \newcommand{\data}[6]{
        \IfSubStr{#6}{highlight:data}{
          \node[highlighted-data] (#2) at (#3) {\nodetext{data}};
          \node[highlighted-field] (hist) at ([yshift=-\datadist,xshift=-1*#1*\datadist] #2.center) {\fieldtext{#4}};
          \node[highlighted-field] (live) at ([yshift=-\datadist,xshift= 1*#1*\datadist] #2.center) {\fieldtext{#5}};
          \draw[dedge,highlight] (#2) -- (hist) node[midway,sloped,above] {\hledgetext{hist}};
          \draw[dedge,highlight] (#2) -- (live) node[midway,sloped,above] {\hledgetext{live}};
        }{
          \node[data] (#2) at (#3) {\nodetext{data}};
          \node[field] (hist) at ([yshift=-\datadist,xshift=-1*#1*\datadist] #2.center) {\fieldtext{#4}};
          \node[field] (live) at ([yshift=-\datadist,xshift= 1*#1*\datadist] #2.center) {\fieldtext{#5}};
          \draw[dedge] (#2) -- (hist) node[midway,sloped,above] {\edgetext{hist}};
          \draw[dedge] (#2) -- (live) node[midway,sloped,above] {\edgetext{live}};
        }
      }
      \renewcommand{\unit}[4]{
        \IfSubStr{#4}{highlight:unit}{
          \node[highlighted-unit] (#1) at (#2) {\nodetext{\si{#3}}};
        }{
          \node[unit] (#1) at (#2) {\nodetext{\si{#3}}};
        }
      }
      \newcommand{\point}[8][1]{
        \IfSubStr{#8}{highlight:point}{
          \node[highlighted-point] (#2 point) at (#3) {\nodetext{#4}};
        }{
          \node[point] (#2 point) at (#3) {\nodetext{#4}};
        }
        \data{#1}{data}{[yshift=-\pointdist,xshift=-1*#1*\pointdist] #2 point.center}{#6}{#7}{#8};
        \unit{unit}{    [yshift=-\pointdist,xshift=   #1*\pointdist] #2 point.center}{#5}{#8};
        \draw[dedge] (#2 point) -- (unit) node[midway,sloped,above] {\edgetext{unit}};
        \draw[dedge] (#2 point) -- (data) node[midway,sloped,above] {\edgetext{data}};
      }
      
      % room 1
      {
        \node[room] (room1) at (-\centerspacing, 0) {\nodetext{Room}};
        \node[field] (room1area) at ([yshift=\datadist+5mm] room1.center) {\fieldtext{17 \si{\square\meter}}};
        \draw[dedge] (room1) -- (room1area) node[midway,sloped,above] {\edgetext{area}};
        
        \point{room1t}{[xshift=-\roomdist*\diagside,yshift=-\roomdist*\diagside] room1}{TC}{\degreeCelsius}{12}{17c5ae15}{highlight:point,highlight:data,highlight:unit}
        \point{room1h}{[xshift=0,yshift=-\roomdist] room1}{Hum}{\percent}{13}{65d0be73}{}
        \point{room1o}{[xshift=-\roomdist,yshift=0] room1}{PIR}{}{24}{5a3573c3}{}
        
        \node[modality] (room1tempModality) at ($(room1)!0.5!(room1t point)$) {\modalitytext{temperature}};
        \draw[dedge] (room1) -- (room1tempModality) node[midway,sloped,above] {\edgetext{modality}};
        \draw[dedge] (room1t point) -- (room1tempModality) node[midway,sloped,above] {\edgetext{provides}};
        
        \node[modality] (room1humModality) at ($(room1)!0.5!(room1h point)$) {\modalitytext{relative}\\\modalitytext{humidity}};
        \draw[dedge] (room1) -- (room1humModality) node[midway,sloped,above,rotate=180] {\edgetext{modality}};
        \draw[dedge] (room1h point) -- (room1humModality) node[midway,sloped,above] {\edgetext{provides}};
        
        \node[modality] (room1occModality) at ($(room1)!0.5!(room1o point)$) {\modalitytext{occupancy}};
        \draw[dedge] (room1) -- (room1occModality) node[midway,sloped,above] {\edgetext{modality}};
        \draw[dedge] (room1o point) -- (room1occModality) node[midway,sloped,above] {\edgetext{provides}};
      }
      
      % room 2
      {
        \node[room] (room2) at (\centerspacing, 0) {\nodetext{Room}};
        \node[field] (room2area) at ([yshift=\datadist+5mm] room2.center) {\fieldtext{23 \si{\square\meter}}};
        \draw[dedge] (room2) -- (room2area) node[midway,sloped,above] {\edgetext{area}};
        
        \point[-1]{room2t}{[xshift=\roomdist*\diagside,yshift=-\roomdist*\diagside] room2}{TM}{\degreeCelsius}{16}{3b83ce7c}{}
        \point[-1]{room2h}{[xshift=0,yshift=-\roomdist] room2}{Hum}{\percent}{53}{91729592}{}
        \point[-1]{room2o}{[xshift=\roomdist,yshift=0] room2}{PIR}{}{27}{b4ae871d}{}
        
        \node[modality] (room2tempModality) at ($(room2)!0.5!(room2t point)$) {\modalitytext{temperature}};
        \draw[dedge] (room2) -- (room2tempModality) node[midway,sloped,above] {\edgetext{modality}};
        \draw[dedge] (room2t point) -- (room2tempModality) node[midway,sloped,above] {\edgetext{provides}};
        
        \node[modality] (room2humModality) at ($(room2)!0.5!(room2h point)$) {\modalitytext{relative}\\\modalitytext{humidity}};
        \draw[dedge] (room2) -- (room2humModality) node[midway,sloped,above,rotate=180] {\edgetext{modality}};
        \draw[dedge] (room2h point) -- (room2humModality) node[midway,sloped,above] {\edgetext{provides}};
        
        \node[modality] (room2occModality) at ($(room2)!0.5!(room2o point)$) {\modalitytext{occupancy}};
        \draw[dedge] (room2) -- (room2occModality) node[midway,sloped,above] {\edgetext{modality}};
        \draw[dedge] (room2o point) -- (room2occModality) node[midway,sloped,above] {\edgetext{provides}};
      }
      
      % middle
      {
        \draw[dbedge] (room1) -- (room2) node[midway,sloped,above] {\edgetext{adjacent}};
        
        \node[room] (floor) at ([yshift=14mm] $(room1)!0.5!(room2)$) {\nodetext{Floor}};
        \draw[dedge] (floor) -- (room1) node[midway,sloped,above] {\edgetext{contains}};
        \draw[dedge] (floor) -- (room2) node[midway,sloped,above] {\edgetext{contains}};
        
        \node[field] (floorName) at ([yshift=\datadist+6mm] floor.center) {\fieldtext{3rd}};
        \draw[dedge] (floor) -- (floorName) node[midway,sloped,above] {\edgetext{name}};
      }
    \end{tikzpicture}
  }
  \end{center}
  \caption[Example of an abstract information model]{Example of an abstract information model covering two rooms on a single floor and some static and dynamic data associated with thiese. TM is an abbreviation for thermistor, and TC for thermocouple.}
  \label{fig:topics:info:model}
\end{figure}

\subsection{Query Patterns}

% problem: 

% solution: query execution engine, traversing enitre model for sites where the pattern matches, what is matched? what is captured?

% fig: pattern covering [room, room area, occupancy provider, temperature provider, relhum provider]
\begin{figure}[tbp]
  \begin{center}
    \begin{tikzpicture}[remember picture]
      \newcommand{\nodetext}[1]{\scalebox{0.7}{#1}}
      \newcommand{\modalitytext}[1]{\scalebox{0.65}{#1}}
      \newcommand{\fieldtext}[1]{\scalebox{0.7}{#1}}
      \newcommand{\edgetext}[1]{\scalebox{0.7}{\textit{#1}}}
      
      \newcommand{\pointsize}[0]{(8mm)}
      \newcommand{\dist}[0]{(24mm)}
      
      \tikzstyle{dedge} = [->,>=stealth,draw=black]
      \tikzstyle{dbedge} = [<->,>=stealth,draw=black]
      \tikzstyle{node}=[
        overlay,
        circle,
        align=center,
        anchor=center,
      ]
      \tikzstyle{point}=[
        node,
        draw=blue,
        minimum height=\pointsize,
        minimum width=\pointsize,
      ]
      \tikzstyle{room}=[
        node,
        draw=blue,
        minimum height=\pointsize,
        minimum width=\pointsize,
      ]
      \tikzstyle{modality}=[
        node,
        draw=purple,
      ]
      \tikzstyle{unit}=[
        node,
        draw=teal,
        anchor=center,
      ]
      \tikzstyle{data}=[
        node,
        draw=teal,
        anchor=center,
      ]
      \tikzstyle{field}=[
        data,
        rectangle,
        anchor=center,
      ]
      
      \node[room] (room) at (0,0) {Room};
      \node[room] (floor) at ([xshift=30mm] room.center) {Floor};
      \node[data] (floorname) at ([xshift=22mm] floor.center) {?};
      \draw[dedge] (floor) -- (room) node[midway,sloped,above] {contains};
      \draw[dedge] (floor) -- (floorname) node[midway,sloped,above] {name};
      
      \node[modality] (tmodality) at ([xshift=-26mm, yshift=-26mm] room.center) {temperature};
      \node[modality] (hmodality) at ([xshift=-26mm, yshift= 26mm] room.center) {relative\\humidity};
      \node[room] (tsensor) at ([xshift=-32mm] tmodality.center) {?};
      \node[room] (hsensor) at ([xshift=-32mm] hmodality.center) {?};
      \draw[dedge] (room) -- (tmodality) node[midway,sloped,above] {modality};
      \draw[dedge] (room) -- (hmodality) node[midway,sloped,above] {modality};
      \draw[dedge] (tsensor) -- (tmodality) node[midway,sloped,above] {provides};
      \draw[dedge] (hsensor) -- (hmodality) node[midway,sloped,above] {provides};
    \end{tikzpicture}
  \end{center}
  \vspace{8mm}
  \caption[Example of the pattern of an abstract model query]{Example of the pattern of an abstract model query. It matches combinations of temperature and relative humidity sensors that are associated with a specific room, along with the floor name associated with the floor of that room.}
  \label{fig:topics:info:model}
\end{figure}

\subsection{Match Sites}

% text

% fig: scale vbox of [match site 1, match site 2, all unit matches, all data matches]

\subsection{Result Sets}

% text

% fig

\subsection{Ontologies}
\subsubsection{RDF}
\subsubsection{OWL}
\subsubsection{Select Ontologies}

% brick
\idx{Brick}\url{https://brickschema.org}

% web of things

% schema.org

% QUDT
The QUDT\idx{QUDT}\footnote{\url{https://www.qudt.org}} ontology models units. While it is the de-facto ontology for this, it is not particularly convenient for automatic conversion.

\subsection{Property Graphs}
\subsubsection{Neo4J}

\idx{Neo4j}\url{https://neo4j.com}

\subsection{Query Languages}
\subsubsection{Cypher}
\subsubsection{OpenCypher}

\idx{OpenCypher}\url{https://opencypher.org}

\subsubsection{Gremlin}
\subsubsection{SparQL}


